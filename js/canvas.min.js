/**
 * canvas.js
 *
 * Copyright 2015, Zach Gates
 * Released under the BSD license
 * http://www.opensource.org/licenses/bsd-license.php
**/
$(document).ready(function(){function t(t){var e=$("img#textual-id")[0];return e.src=t.toDataURL("image/png"),e.src}function e(e){for(var e=e||"",n=$("canvas#textual-id")[0],i=n.getContext("2d"),a=0,o=1;100>o&&(l=Math.ceil(Math.sqrt(3*e.length))+2,!(l*o>300));o++)a=o;e=cells(e),n.setAttribute("width",e.length*a+"px"),n.setAttribute("height",e.length*a+"px"),$("img#textual-id").css({zoom:300/(e.length*a)});for(var o=0;o<e.length;o++)for(var l=0;l<e[o].length;l++)i.beginPath(),i.fillStyle="#"+e[o][l],i.fillRect(l*a,o*a,a,a);e=t(n),$("a#dload")[0].href=e}$("#banner").slideUp(0),$("#home-main-cont").slideUp(0),$("#demo-main-cont").slideUp(0),setTimeout(function(){$("#banner").slideDown(750),$("#home-main-cont").slideDown(750)},250),toHome=function(){$("#demo-main-cont").slideUp(750),setTimeout(function(){$("#banner").slideDown(750),$("#home-main-cont").slideDown(750)},750)},toDemo=function(){$("#home-main-cont").slideUp(750),$("#banner").slideUp(750),setTimeout(function(){$("#demo-main-cont").slideDown(750)},750)},$("textarea#textual-input").on("input",function(){e($(this).val())}),$("input#upload").change(function(){$("div#load-toggle").css({display:"inline-block"});var t=this.files[0],e=new FileReader;e.onload=function(){var t=e.result;$("textarea#textual-base").text(t)},e.readAsDataURL(t),setTimeout(function(){var t=$("textarea#textual-base").val(),e=fromidentity(t),n=RegExp(/https?:\/\/.*/);e.match(n)&&window.open(e),$("textarea#textual-id").text(e),$("div#load-toggle").css({display:"none"})},500)}),e($("input#textual-input").val())});