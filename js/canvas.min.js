/**
 * canvas.js
 *
 * Copyright 2015, Zach Gates
 * Released under the BSD license
 * http://www.opensource.org/licenses/bsd-license.php
**/
$(document).ready(function(){function t(t){var e=$("img#textual-id")[0];return e.src=t.toDataURL("image/png"),e.src}function e(e){for(var e=e||"",a=$("canvas#textual-id")[0],n=a.getContext("2d"),i=0,l=1;100>l&&(u=Math.ceil(Math.sqrt(3*e.length))+2,!(u*l>300));l++)i=l;e=cells(e),a.setAttribute("width",e.length*i+"px"),a.setAttribute("height",e.length*i+"px"),$("img#textual-id").css({zoom:300/(e.length*i)});for(var l=0;l<e.length;l++)for(var u=0;u<e[l].length;u++)n.beginPath(),n.fillStyle="#"+e[l][u],n.fillRect(u*i,l*i,i,i);e=t(a),$("a#dload")[0].href=e}$("input#textual-input").on("input",function(){e($(this).val())}),$("input#upload").change(function(){var t=this.files[0],e=new FileReader;e.onload=function(){var t=e.result;$("textarea#textual-base").text(t)},e.readAsDataURL(t),setTimeout(function(){var t=$("textarea#textual-base").val(),e=fromidentity(t),a=RegExp(/https?:\/\/.*/);e.match(a)&&window.open(e),$("textarea#textual-id").text(e)},500)}),e($("input#textual-input").val())});