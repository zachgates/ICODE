function ord(t){return t.charCodeAt(0)}function chr(t){return String.fromCharCode(t)}function range(t,r,n){var e=[];if("undefined"==typeof r&&(r=t,t=0),"undefined"==typeof n&&(n=1),n>0&&t>=r||0>n&&r>=t)return[];for(var a=t;n>0?r>a:a>r;a+=n)e.push(a);return e}function chunks(t,r){for(var n=range(0,t.length,r),e=[],a=0;a<n.length;a++)e.push(t.slice(n[a],n[a]+r));return e}function bincolor(t){return clrs={0:[196,86,86,255],1:[196,151,86,255],2:[176,196,86,255],3:[110,196,86,255],4:[86,196,129,255],5:[86,196,195,255],6:[86,132,196,255],7:[107,86,196,255],8:[173,86,196,255],9:[196,86,154,255],"+":[0,0,0,0]},clrs[t]}function frombincolor(t){return clrs={C45656:"0",C49756:"1",B0C456:"2","6EC456":"3","56C481":"4","56C4C3":"5","5684C4":"6","6B56C4":"7",AD56C4:"8",C4569A:"9",CCCCCC:"+","000000":""},clrs[t]}function identity(t){for(var n=[],e="",o=0;o<t.length;o++)n.push(10*ord(t[o])/5);for(var o=0;o<n.length;o++){var h=n[o].toString();a=h.length<5?5-h.length:h.length%5,e+=h.space(a,"+")}for(var c=Math.floor(Math.sqrt(e.length)/1)+1;c%3!=0;)c+=1;for(var i=Math.pow(c,2)-e.length,u="",o=0;u.length<Math.pow(c,2);){if(o%3&&i&&(a=Math.random(),b=Math.random(),a>b))for(r=Math.floor(i/Math.pow(c,2)>.4?10*Math.random()/1:1*Math.random()/1),0==r&&(r=1),r>i&&(r=i+1-1),i-=r;r>0;)u+="-",r-=1;o<e.length?(u+=e[o],o+=1):u+="-"}return[u,c]}function cells(t){id=identity(t);for(var r=id[0],n=id[1],e=[],a=0;a<r.length;a++)cell=r[a],color=bincolor(cell),e.push(color?color:[0,0,0,255]);if(e.length>Math.pow(n,2)){error=e.splice(Math.pow(n,2));for(var a=0;a<error.length;a++)if(errCell=error[a],errCell!=[0,0,0,255])throw"cell error"}for(var o=chunks(e,n),a=0;a<o.length;a++)o[a].unshift([0,0,0,0]),o[a].push([0,0,0,0]);o.unshift(new Array(n+3).join("0").split("").map(function(){return[0,0,0,255]})),o.push(new Array(n+3).join("0").split("").map(function(){return[0,0,0,255]}));for(var a=0;a<o[0].length;a++)a%2!=0?o[0][a]=[0,0,0,0]:o[o.length-1][a]=[0,0,0,0];return o}function toHex(t,r,n,e){return 0==t&0==r&0==n&0==e?"CCCCCC":(hex=(256+t).toString(16).substr(1)+((1<<24)+(r<<16)|n<<8|e).toString(16).substr(1),hex.substr(0,hex.length-2).toUpperCase())}function cutimage(t){for(var r=[],n=0,e=0;e<t.width&&(canvas=document.createElement("canvas"),context=canvas.getContext("2d"),canvas.width=1,canvas.height=1,context.drawImage(t,e,0,1,1,0,0,1,1),data=context.getImageData(0,0,1,1).data,hex=toHex.apply(this,data),"000000"==hex);e++)n+=1;for(var e=0;e<t.width/n;e++)for(var a=0;a<t.height/n;a++)canvas=document.createElement("canvas"),context=canvas.getContext("2d"),canvas.width=n,canvas.height=n,context.drawImage(t,a*n,e*n,n,n,0,0,n,n),data=context.getImageData(Math.floor(n/2),Math.floor(n/2),1,1).data,r.push(toHex.apply(this,data));return[r,n]}function fromidentity(t){var r=new Image;r.src=t;for(var n=cutimage(r),e=n[0],a=r.width/n[1],o=0,h=0;a>h;h++)chunk=chunks(e,a),"000000"==chunk[0][h]&&(o+=1),"000000"==chunk[chunk.length-1][h]&&(o+=1);var c=chunks(e,o),i=c.slice(1,c.length-1).map(function(t){return t.slice(1,t.length-1)});return i=[].concat.apply([],i),i=i.map(frombincolor).filter(function(t){return""!=t}),i.length?(i=chunks(i,5).map(function(t){return j=t.join("").replace(/\+/g,""),chr(parseInt(j)/2)}),i.join("")):""}String.prototype.mult=function(t){return new Array(t+1).join(this)},String.prototype.space=function(t,r){for(var n="",e=0;e<this.length;)t&&Math.random()<.5?(n+=r,t--):n+=this[e++];for(;t--;)n+=r;return n};